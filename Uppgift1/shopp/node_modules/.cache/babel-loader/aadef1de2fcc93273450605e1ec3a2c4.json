{"remainingRequest":"C:\\Users\\sarab\\Desktop\\clone\\Vuex-shop\\apishop\\Uppgift1\\shopp\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\sarab\\Desktop\\clone\\Vuex-shop\\apishop\\Uppgift1\\shopp\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\sarab\\Desktop\\clone\\Vuex-shop\\apishop\\Uppgift1\\shopp\\src\\store\\modules\\user.js","dependencies":[{"path":"C:\\Users\\sarab\\Desktop\\clone\\Vuex-shop\\apishop\\Uppgift1\\shopp\\src\\store\\modules\\user.js","mtime":1620055547796},{"path":"C:\\Users\\sarab\\Desktop\\clone\\Vuex-shop\\apishop\\Uppgift1\\shopp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1620055534756},{"path":"C:\\Users\\sarab\\Desktop\\clone\\Vuex-shop\\apishop\\Uppgift1\\shopp\\node_modules\\babel-loader\\lib\\index.js","mtime":1620055534244},{"path":"C:\\Users\\sarab\\Desktop\\clone\\Vuex-shop\\apishop\\Uppgift1\\shopp\\node_modules\\eslint-loader\\index.js","mtime":1620055538523}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL3NhcmFiL0Rlc2t0b3AvY2xvbmUvVnVleC1zaG9wL2FwaXNob3AvVXBwZ2lmdDEvc2hvcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdAL2F4aW9zJzsKaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlcic7CmV4cG9ydCBkZWZhdWx0IHsKICBzdGF0ZTogewogICAgdXNlclRva2VuOiBudWxsLAogICAgbG9nZ2VkSW46IGZhbHNlCiAgfSwKICBnZXR0ZXJzOiB7CiAgICBsb2dnZWRJbjogZnVuY3Rpb24gbG9nZ2VkSW4oc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLmxvZ2dlZEluOwogICAgfQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBTRVRfVVNFUjogZnVuY3Rpb24gU0VUX1VTRVIoc3RhdGUsIHRva2VuKSB7CiAgICAgIGlmICh0b2tlbikgewogICAgICAgIHN0YXRlLnVzZXJUb2tlbiA9IHRva2VuOwogICAgICAgIHN0YXRlLmxvZ2dlZEluID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICBzdGF0ZS51c2VyVG9rZW4gPSBudWxsOwogICAgICAgIHN0YXRlLmxvZ2dlZEluID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBDSEVDS19VU0VSOiBmdW5jdGlvbiBDSEVDS19VU0VSKHN0YXRlKSB7CiAgICAgIHRyeSB7CiAgICAgICAgdmFyIHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CgogICAgICAgIGlmICh0b2tlbikgewogICAgICAgICAgc3RhdGUudXNlclRva2VuID0gdG9rZW47CiAgICAgICAgICBzdGF0ZS5sb2dnZWRJbiA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHN0YXRlLnVzZXJUb2tlbiA9IG51bGw7CiAgICAgICAgICBzdGF0ZS5sb2dnZWRJbiA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfQogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgcmVnaXN0ZXI6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWdpc3RlciA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShfcmVmLCBfdXNlcikgewogICAgICAgIHZhciBkaXNwYXRjaCwgdXNlcjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBkaXNwYXRjaCA9IF9yZWYuZGlzcGF0Y2g7CiAgICAgICAgICAgICAgICB1c2VyID0gewogICAgICAgICAgICAgICAgICBlbWFpbDogX3VzZXIuZW1haWwsCiAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBfdXNlci5wYXNzd29yZAogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIGF4aW9zLnBvc3QoJy91c2Vycy9yZWdpc3RlcicsIF91c2VyKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ2xvZ2luJywgewogICAgICAgICAgICAgICAgICB1c2VyOiB1c2VyCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIHJlZ2lzdGVyKF94LCBfeDIpIHsKICAgICAgICByZXR1cm4gX3JlZ2lzdGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiByZWdpc3RlcjsKICAgIH0oKSwKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmMiwgcGF5bG9hZCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjIuY29tbWl0OwogICAgICBheGlvcy5wb3N0KCcvdXNlcnMvbG9naW4nLCBwYXlsb2FkLnVzZXIpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHJlcy5kYXRhLnRva2VuKTsKICAgICAgICAgIGNvbW1pdCgnU0VUX1VTRVInLCByZXMuZGF0YS50b2tlbik7CgogICAgICAgICAgaWYgKHBheWxvYWQucm91dGUpIHsKICAgICAgICAgICAgcm91dGVyLnB1c2gocGF5bG9hZC5yb3V0ZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByb3V0ZXIucHVzaCgnLycpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgY2hlY2tVc2VyOiBmdW5jdGlvbiBjaGVja1VzZXIoX3JlZjMpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdDsKICAgICAgY29tbWl0KCdDSEVDS19VU0VSJyk7CiAgICB9LAogICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjQpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWY0LmNvbW1pdDsKICAgICAgdmFyIHRva2VuID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyk7CgogICAgICBpZiAodG9rZW4pIHsKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICAgICAgICBjb21taXQoJ1NFVF9VU0VSJywgbnVsbCk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"sources":["C:/Users/sarab/Desktop/clone/Vuex-shop/apishop/Uppgift1/shopp/src/store/modules/user.js"],"names":["axios","router","state","userToken","loggedIn","getters","mutations","SET_USER","token","CHECK_USER","localStorage","getItem","err","console","log","actions","register","_user","dispatch","user","email","password","post","login","payload","commit","then","res","status","setItem","data","route","push","checkUser","logout","removeItem"],"mappings":"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","sourcesContent":["import axios from '@/axios'\r\nimport router from '@/router'\r\n\r\nexport default {\r\n  state: {\r\n    userToken: null,\r\n    loggedIn: false\r\n  },\r\n  getters: {\r\n    loggedIn: state => state.loggedIn\r\n  },\r\n  mutations: {\r\n    SET_USER: (state, token) => {\r\n      if(token) {\r\n        state.userToken = token\r\n        state.loggedIn = true\r\n      } else {\r\n        state.userToken = null\r\n        state.loggedIn = false\r\n      }\r\n    },\r\n    CHECK_USER: state => {\r\n      try {\r\n        let token = localStorage.getItem('token')\r\n        if(token) {\r\n          state.userToken = token\r\n          state.loggedIn = true\r\n        } else {\r\n          state.userToken = null\r\n          state.loggedIn = false\r\n        }\r\n      }\r\n      catch(err) {\r\n        console.log(err)\r\n      }\r\n    }\r\n  },\r\n  actions: {\r\n    register: async ({dispatch}, _user) => {\r\n      const user = {\r\n        email: _user.email,\r\n        password: _user.password\r\n      }\r\n      await axios.post('/users/register', _user)\r\n      dispatch('login', {user})\r\n    },\r\n    login: ({commit}, payload) => {\r\n      axios.post('/users/login', payload.user)\r\n        .then(res => {\r\n          if(res.status === 200) {\r\n            \r\n            localStorage.setItem('token', res.data.token)\r\n            commit('SET_USER', res.data.token)\r\n\r\n            if(payload.route) {\r\n              router.push(payload.route)\r\n            } else {\r\n              router.push('/')\r\n            }\r\n          }\r\n        })\r\n    },\r\n    checkUser: ({commit}) => {\r\n      commit('CHECK_USER')\r\n    },\r\n    logout: ({commit}) => {\r\n      let token = localStorage.getItem('token')\r\n      if(token) {\r\n        localStorage.removeItem('token')\r\n        commit('SET_USER', null)\r\n      }\r\n    }\r\n  }\r\n}"]}]}