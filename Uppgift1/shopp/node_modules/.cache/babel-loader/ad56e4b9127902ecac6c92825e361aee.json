{"remainingRequest":"C:\\Users\\sarab\\Desktop\\vuex\\Uppgift1\\shopp\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\sarab\\Desktop\\vuex\\Uppgift1\\shopp\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\sarab\\Desktop\\vuex\\Uppgift1\\shopp\\src\\store\\modules\\user.js","dependencies":[{"path":"C:\\Users\\sarab\\Desktop\\vuex\\Uppgift1\\shopp\\src\\store\\modules\\user.js","mtime":1617635709406},{"path":"C:\\Users\\sarab\\Desktop\\vuex\\Uppgift1\\shopp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\sarab\\Desktop\\vuex\\Uppgift1\\shopp\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\sarab\\Desktop\\vuex\\Uppgift1\\shopp\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL3NhcmFiL0Rlc2t0b3AvdnVleC9VcHBnaWZ0MS9zaG9wcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IGF4aW9zIGZyb20gJ0AvYXhpb3MnOwppbXBvcnQgcm91dGVyIGZyb20gJ0Avcm91dGVyJzsKZXhwb3J0IGRlZmF1bHQgewogIHN0YXRlOiB7CiAgICB1c2VyVG9rZW46IG51bGwsCiAgICBsb2dnZWRJbjogZmFsc2UKICB9LAogIGdldHRlcnM6IHsKICAgIGxvZ2dlZEluOiBmdW5jdGlvbiBsb2dnZWRJbihzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUubG9nZ2VkSW47CiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIFNFVF9VU0VSOiBmdW5jdGlvbiBTRVRfVVNFUihzdGF0ZSwgdG9rZW4pIHsKICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgc3RhdGUudXNlclRva2VuID0gdG9rZW47CiAgICAgICAgc3RhdGUubG9nZ2VkSW4gPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHN0YXRlLnVzZXJUb2tlbiA9IG51bGw7CiAgICAgICAgc3RhdGUubG9nZ2VkSW4gPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIENIRUNLX1VTRVI6IGZ1bmN0aW9uIENIRUNLX1VTRVIoc3RhdGUpIHsKICAgICAgdHJ5IHsKICAgICAgICB2YXIgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKCiAgICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgICBzdGF0ZS51c2VyVG9rZW4gPSB0b2tlbjsKICAgICAgICAgIHN0YXRlLmxvZ2dlZEluID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc3RhdGUudXNlclRva2VuID0gbnVsbDsKICAgICAgICAgIHN0YXRlLmxvZ2dlZEluID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICByZWdpc3RlcjogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZ2lzdGVyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKF9yZWYsIF91c2VyKSB7CiAgICAgICAgdmFyIGRpc3BhdGNoLCB1c2VyOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRpc3BhdGNoID0gX3JlZi5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIHVzZXIgPSB7CiAgICAgICAgICAgICAgICAgIGVtYWlsOiBfdXNlci5lbWFpbCwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IF91c2VyLnBhc3N3b3JkCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MucG9zdCgnL3VzZXJzL3JlZ2lzdGVyJywgX3VzZXIpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBkaXNwYXRjaCgnbG9naW4nLCB7CiAgICAgICAgICAgICAgICAgIHVzZXI6IHVzZXIKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgZnVuY3Rpb24gcmVnaXN0ZXIoX3gsIF94MikgewogICAgICAgIHJldHVybiBfcmVnaXN0ZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlZ2lzdGVyOwogICAgfSgpLAogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYyLCBwYXlsb2FkKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICAgIGF4aW9zLnBvc3QoJy91c2Vycy9sb2dpbicsIHBheWxvYWQudXNlcikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwMCkgewogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgcmVzLmRhdGEudG9rZW4pOwogICAgICAgICAgY29tbWl0KCdTRVRfVVNFUicsIHJlcy5kYXRhLnRva2VuKTsKCiAgICAgICAgICBpZiAocGF5bG9hZC5yb3V0ZSkgewogICAgICAgICAgICByb3V0ZXIucHVzaChwYXlsb2FkLnJvdXRlKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJvdXRlci5wdXNoKCcvJyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBjaGVja1VzZXI6IGZ1bmN0aW9uIGNoZWNrVXNlcihfcmVmMykgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0OwogICAgICBjb21taXQoJ0NIRUNLX1VTRVInKTsKICAgIH0sCiAgICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmNCkgewogICAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0OwogICAgICB2YXIgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKCiAgICAgIGlmICh0b2tlbikgewogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgICAgIGNvbW1pdCgnU0VUX1VTRVInLCBudWxsKTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"sources":["C:/Users/sarab/Desktop/vuex/Uppgift1/shopp/src/store/modules/user.js"],"names":["axios","router","state","userToken","loggedIn","getters","mutations","SET_USER","token","CHECK_USER","localStorage","getItem","err","console","log","actions","register","_user","dispatch","user","email","password","post","login","payload","commit","then","res","status","setItem","data","route","push","checkUser","logout","removeItem"],"mappings":"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","sourcesContent":["import axios from '@/axios'\r\nimport router from '@/router'\r\n\r\nexport default {\r\n  state: {\r\n    userToken: null,\r\n    loggedIn: false\r\n  },\r\n  getters: {\r\n    loggedIn: state => state.loggedIn\r\n  },\r\n  mutations: {\r\n    SET_USER: (state, token) => {\r\n      if(token) {\r\n        state.userToken = token\r\n        state.loggedIn = true\r\n      } else {\r\n        state.userToken = null\r\n        state.loggedIn = false\r\n      }\r\n    },\r\n    CHECK_USER: state => {\r\n      try {\r\n        let token = localStorage.getItem('token')\r\n        if(token) {\r\n          state.userToken = token\r\n          state.loggedIn = true\r\n        } else {\r\n          state.userToken = null\r\n          state.loggedIn = false\r\n        }\r\n      }\r\n      catch(err) {\r\n        console.log(err)\r\n      }\r\n    }\r\n  },\r\n  actions: {\r\n    register: async ({dispatch}, _user) => {\r\n      const user = {\r\n        email: _user.email,\r\n        password: _user.password\r\n      }\r\n      await axios.post('/users/register', _user)\r\n      dispatch('login', {user})\r\n    },\r\n    login: ({commit}, payload) => {\r\n      axios.post('/users/login', payload.user)\r\n        .then(res => {\r\n          if(res.status === 200) {\r\n            \r\n            localStorage.setItem('token', res.data.token)\r\n            commit('SET_USER', res.data.token)\r\n\r\n            if(payload.route) {\r\n              router.push(payload.route)\r\n            } else {\r\n              router.push('/')\r\n            }\r\n          }\r\n        })\r\n    },\r\n    checkUser: ({commit}) => {\r\n      commit('CHECK_USER')\r\n    },\r\n    logout: ({commit}) => {\r\n      let token = localStorage.getItem('token')\r\n      if(token) {\r\n        localStorage.removeItem('token')\r\n        commit('SET_USER', null)\r\n      }\r\n    }\r\n  }\r\n}"]}]}