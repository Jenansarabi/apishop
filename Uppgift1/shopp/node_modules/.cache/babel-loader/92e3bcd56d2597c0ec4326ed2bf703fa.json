{"remainingRequest":"C:\\Users\\sarab\\Desktop\\clone\\Vuex-shop\\Uppgift1\\shopp\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\sarab\\Desktop\\clone\\Vuex-shop\\Uppgift1\\shopp\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\sarab\\Desktop\\clone\\Vuex-shop\\Uppgift1\\shopp\\src\\store\\modules\\user.js","dependencies":[{"path":"C:\\Users\\sarab\\Desktop\\clone\\Vuex-shop\\Uppgift1\\shopp\\src\\store\\modules\\user.js","mtime":1620053976321},{"path":"C:\\Users\\sarab\\Desktop\\clone\\Vuex-shop\\Uppgift1\\shopp\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1620053963244},{"path":"C:\\Users\\sarab\\Desktop\\clone\\Vuex-shop\\Uppgift1\\shopp\\node_modules\\babel-loader\\lib\\index.js","mtime":1620053962850},{"path":"C:\\Users\\sarab\\Desktop\\clone\\Vuex-shop\\Uppgift1\\shopp\\node_modules\\eslint-loader\\index.js","mtime":1620053966364}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL3NhcmFiL0Rlc2t0b3AvY2xvbmUvVnVleC1zaG9wL1VwcGdpZnQxL3Nob3BwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgYXhpb3MgZnJvbSAnQC9heGlvcyc7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXInOwpleHBvcnQgZGVmYXVsdCB7CiAgc3RhdGU6IHsKICAgIHVzZXJUb2tlbjogbnVsbCwKICAgIGxvZ2dlZEluOiBmYWxzZQogIH0sCiAgZ2V0dGVyczogewogICAgbG9nZ2VkSW46IGZ1bmN0aW9uIGxvZ2dlZEluKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5sb2dnZWRJbjsKICAgIH0KICB9LAogIG11dGF0aW9uczogewogICAgU0VUX1VTRVI6IGZ1bmN0aW9uIFNFVF9VU0VSKHN0YXRlLCB0b2tlbikgewogICAgICBpZiAodG9rZW4pIHsKICAgICAgICBzdGF0ZS51c2VyVG9rZW4gPSB0b2tlbjsKICAgICAgICBzdGF0ZS5sb2dnZWRJbiA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RhdGUudXNlclRva2VuID0gbnVsbDsKICAgICAgICBzdGF0ZS5sb2dnZWRJbiA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgQ0hFQ0tfVVNFUjogZnVuY3Rpb24gQ0hFQ0tfVVNFUihzdGF0ZSkgewogICAgICB0cnkgewogICAgICAgIHZhciB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwoKICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgIHN0YXRlLnVzZXJUb2tlbiA9IHRva2VuOwogICAgICAgICAgc3RhdGUubG9nZ2VkSW4gPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzdGF0ZS51c2VyVG9rZW4gPSBudWxsOwogICAgICAgICAgc3RhdGUubG9nZ2VkSW4gPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0KICAgIH0KICB9LAogIGFjdGlvbnM6IHsKICAgIHJlZ2lzdGVyOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVnaXN0ZXIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoX3JlZiwgX3VzZXIpIHsKICAgICAgICB2YXIgZGlzcGF0Y2gsIHVzZXI7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZGlzcGF0Y2ggPSBfcmVmLmRpc3BhdGNoOwogICAgICAgICAgICAgICAgdXNlciA9IHsKICAgICAgICAgICAgICAgICAgZW1haWw6IF91c2VyLmVtYWlsLAogICAgICAgICAgICAgICAgICBwYXNzd29yZDogX3VzZXIucGFzc3dvcmQKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5wb3N0KCcvdXNlcnMvcmVnaXN0ZXInLCBfdXNlcik7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIGRpc3BhdGNoKCdsb2dpbicsIHsKICAgICAgICAgICAgICAgICAgdXNlcjogdXNlcgogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiByZWdpc3RlcihfeCwgX3gyKSB7CiAgICAgICAgcmV0dXJuIF9yZWdpc3Rlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9CgogICAgICByZXR1cm4gcmVnaXN0ZXI7CiAgICB9KCksCiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZjIsIHBheWxvYWQpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgICAgYXhpb3MucG9zdCgnL3VzZXJzL2xvZ2luJywgcGF5bG9hZC51c2VyKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndG9rZW4nLCByZXMuZGF0YS50b2tlbik7CiAgICAgICAgICBjb21taXQoJ1NFVF9VU0VSJywgcmVzLmRhdGEudG9rZW4pOwoKICAgICAgICAgIGlmIChwYXlsb2FkLnJvdXRlKSB7CiAgICAgICAgICAgIHJvdXRlci5wdXNoKHBheWxvYWQucm91dGUpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcm91dGVyLnB1c2goJy8nKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGNoZWNrVXNlcjogZnVuY3Rpb24gY2hlY2tVc2VyKF9yZWYzKSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICAgIGNvbW1pdCgnQ0hFQ0tfVVNFUicpOwogICAgfSwKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWY0KSB7CiAgICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICAgIHZhciB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwoKICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICAgICAgY29tbWl0KCdTRVRfVVNFUicsIG51bGwpOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["C:/Users/sarab/Desktop/clone/Vuex-shop/Uppgift1/shopp/src/store/modules/user.js"],"names":["axios","router","state","userToken","loggedIn","getters","mutations","SET_USER","token","CHECK_USER","localStorage","getItem","err","console","log","actions","register","_user","dispatch","user","email","password","post","login","payload","commit","then","res","status","setItem","data","route","push","checkUser","logout","removeItem"],"mappings":"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","sourcesContent":["import axios from '@/axios'\r\nimport router from '@/router'\r\n\r\nexport default {\r\n  state: {\r\n    userToken: null,\r\n    loggedIn: false\r\n  },\r\n  getters: {\r\n    loggedIn: state => state.loggedIn\r\n  },\r\n  mutations: {\r\n    SET_USER: (state, token) => {\r\n      if(token) {\r\n        state.userToken = token\r\n        state.loggedIn = true\r\n      } else {\r\n        state.userToken = null\r\n        state.loggedIn = false\r\n      }\r\n    },\r\n    CHECK_USER: state => {\r\n      try {\r\n        let token = localStorage.getItem('token')\r\n        if(token) {\r\n          state.userToken = token\r\n          state.loggedIn = true\r\n        } else {\r\n          state.userToken = null\r\n          state.loggedIn = false\r\n        }\r\n      }\r\n      catch(err) {\r\n        console.log(err)\r\n      }\r\n    }\r\n  },\r\n  actions: {\r\n    register: async ({dispatch}, _user) => {\r\n      const user = {\r\n        email: _user.email,\r\n        password: _user.password\r\n      }\r\n      await axios.post('/users/register', _user)\r\n      dispatch('login', {user})\r\n    },\r\n    login: ({commit}, payload) => {\r\n      axios.post('/users/login', payload.user)\r\n        .then(res => {\r\n          if(res.status === 200) {\r\n            \r\n            localStorage.setItem('token', res.data.token)\r\n            commit('SET_USER', res.data.token)\r\n\r\n            if(payload.route) {\r\n              router.push(payload.route)\r\n            } else {\r\n              router.push('/')\r\n            }\r\n          }\r\n        })\r\n    },\r\n    checkUser: ({commit}) => {\r\n      commit('CHECK_USER')\r\n    },\r\n    logout: ({commit}) => {\r\n      let token = localStorage.getItem('token')\r\n      if(token) {\r\n        localStorage.removeItem('token')\r\n        commit('SET_USER', null)\r\n      }\r\n    }\r\n  }\r\n}"]}]}